{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport firebase from 'firebase/compat/app';\nimport { connect } from 'react-redux';\nimport 'firebase/compat/firestore';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction Feed(props) {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    posts = _useState2[0],\n    setPosts = _useState2[1];\n  useEffect(function () {\n    var posts = [];\n    if (props.usersLoaded == props.following.length) {\n      var _loop = function _loop(i) {\n        var user = props.users.find(function (el) {\n          return el.uid === props.following[i];\n        });\n        if (user != undefined) {\n          posts = [].concat(_toConsumableArray(posts), _toConsumableArray(user.posts));\n        }\n      };\n      for (var i = 0; i < props.following.length; i++) {\n        _loop(i);\n      }\n      posts.sort(function (x, y) {\n        return x.creation - y.creation;\n      });\n      setPosts(posts);\n    }\n  }, [props.usersLoaded]);\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(View, {\n      style: styles.containerGallery,\n      children: _jsx(FlatList, {\n        numColumns: 1,\n        horizontal: false,\n        data: posts,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return _jsxs(View, {\n            style: styles.containerImage,\n            children: [_jsx(Text, {\n              style: styles.container,\n              children: item.user.name\n            }), _jsx(Image, {\n              style: styles.image,\n              source: {\n                uri: item.downloadURL\n              }\n            })]\n          });\n        }\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  containerInfo: {\n    margin: 20\n  },\n  containerGallery: {\n    flex: 1\n  },\n  containerImage: {\n    flex: 1\n  },\n  image: {\n    flex: 1,\n    aspectRatio: 1 / 1\n  }\n});\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser,\n    following: store.userState.following,\n    users: store.usersState.users,\n    usersLoaded: store.usersState.usersLoaded\n  };\n};\nexport default connect(mapStateToProps, null)(Feed);","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","View","Text","Image","FlatList","Button","firebase","connect","jsx","_jsx","jsxs","_jsxs","Feed","props","_useState","_useState2","_slicedToArray","posts","setPosts","usersLoaded","following","length","_loop","i","user","users","find","el","uid","undefined","concat","_toConsumableArray","sort","x","y","creation","style","styles","container","children","containerGallery","numColumns","horizontal","data","renderItem","_ref","item","containerImage","name","image","source","uri","downloadURL","create","flex","containerInfo","margin","aspectRatio","mapStateToProps","store","currentUser","userState","usersState"],"sources":["C:/Users/jmf03/Desktop/Software studios/FINAL PROJECT/BeProductive/components/main/Feed.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {StyleSheet,View, Text, Image, FlatList, Button} from 'react-native'\r\nimport firebase from 'firebase/compat/app'\r\nimport {connect} from 'react-redux'\r\nimport 'firebase/compat/firestore';\r\nfunction Feed(props) {\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  useEffect(() => {\r\n      let posts = [];\r\n      if(props.usersLoaded == props.following.length){\r\n          for (let i = 0; i < props.following.length; i++){\r\n              const user = props.users.find(el => el.uid === props.following[i]);\r\n              if(user != undefined){\r\n                  posts = [...posts, ...user.posts];\r\n              }\r\n          }\r\n\r\n          posts.sort(function(x,y) {\r\n              return x.creation - y.creation;\r\n          })\r\n\r\n          setPosts(posts);\r\n      }\r\n\r\n  }, [props.usersLoaded])\r\n\r\n  return (\r\n      <View style={styles.container}>\r\n          <View style={styles.containerGallery}>\r\n              <FlatList\r\n                  numColumns={1}\r\n                  horizontal={false}\r\n                  data={posts}\r\n                  renderItem={({ item }) => (\r\n                      <View\r\n                          style={styles.containerImage}>\r\n                          <Text style={styles.container}>{item.user.name}</Text>\r\n                          <Image\r\n                              style={styles.image}\r\n                              source={{ uri: item.downloadURL }}\r\n                          />\r\n                      </View>\r\n\r\n                  )}\r\n\r\n              />\r\n          </View>\r\n      </View>\r\n\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n      flex: 1,\r\n  },\r\n  containerInfo: {\r\n      margin: 20\r\n  },\r\n  containerGallery: {\r\n      flex: 1\r\n  },\r\n  containerImage: {\r\n      flex: 1\r\n\r\n  },\r\n  image: {\r\n      flex: 1,\r\n      aspectRatio: 1 / 1\r\n  }\r\n})\r\nconst mapStateToProps = (store) => ({\r\n  currentUser: store.userState.currentUser,\r\n  following: store.userState.following,\r\n  users: store.usersState.users,\r\n  usersLoaded: store.usersState.usersLoaded,\r\n\r\n\r\n})\r\nexport default connect(mapStateToProps, null)(Feed);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}