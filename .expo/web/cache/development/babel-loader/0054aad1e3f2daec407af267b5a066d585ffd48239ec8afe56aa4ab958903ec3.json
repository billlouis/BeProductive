{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { userRef, useState, useEffect } from 'react';\nimport { useHistory, useNavigate } from 'react-router-dom';\nimport { ChatEngine } from 'react-chat-engine';\nimport { auth } from 'firebase/compat/app';\nimport axios from 'axios';\nimport { useAuth } from \"./AuthContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar Chats = function Chats() {\n  var navigate = useNavigate();\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  console.log(user);\n  var getFile = function () {\n    var _ref = _asyncToGenerator(function* (url) {\n      var response = yield fetch(url);\n      var data = yield response.blob();\n      return new File([data], \"userPhoto.jpg\", {\n        type: 'image/jpeg'\n      });\n    });\n    return function getFile(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    if (!user) {\n      navigate(\"/\");\n      return;\n    }\n    axios.get('https://api.chatengine.io/users/me', {\n      headers: {\n        \"project-id\": \"c12bd3f9-bb17-4cdf-8fcb-688f32c219c7\",\n        \"user-name\": user.email,\n        \"user-secret\": user.uid\n      }\n    }).then(function () {\n      setLoading(false);\n    }).catch(function () {\n      var formdata = new FormData();\n      formdata.append('email', user.email);\n      formdata.append('username', user.email);\n      formdata.append('secret', user.uid);\n      axios.post('https://api.chatengine.io/users/', formdata, {\n        headers: {\n          \"private-key\": \"0e59f83b-5842-4313-a77e-f43c20c07a56\"\n        }\n      });\n    });\n  }, [user, history]);\n  if (!user || loading) return 'Loading....';\n  return _jsx(\"div\", {\n    className: \"chats-page\",\n    children: _jsx(ChatEngine, {\n      height: \"calc(100vh -66px)\",\n      projectID: \"c12bd3f9-bb17-4cdf-8fcb-688f32c219c7\",\n      userName: user.email,\n      userSecret: user.uid\n    })\n  });\n};\nexport default Chats;","map":{"version":3,"names":["React","userRef","useState","useEffect","useHistory","useNavigate","ChatEngine","auth","axios","useAuth","jsx","_jsx","Chats","navigate","_useAuth","user","_useState","_useState2","_slicedToArray","loading","setLoading","console","log","getFile","_ref","_asyncToGenerator","url","response","fetch","data","blob","File","type","_x","apply","arguments","get","headers","email","uid","then","catch","formdata","FormData","append","post","history","className","children","height","projectID","userName","userSecret"],"sources":["D:/University/Semester 4/SOftware Studio/Demo 3/BeProductive/components/chat/Chats.js"],"sourcesContent":["import React, { userRef, useState, useEffect} from 'react'\r\nimport { useHistory, useNavigate } from 'react-router-dom'\r\nimport { ChatEngine } from 'react-chat-engine'\r\nimport { auth } from 'firebase/compat/app'\r\nimport axios from 'axios';\r\nimport { useAuth } from \"./AuthContext\"\r\n\r\nconst Chats = () => {\r\n    const navigate = useNavigate();\r\n    const { user } = useAuth();\r\n    const[loading, setLoading] = useState(true);\r\n    console.log(user);\r\n\r\n    const getFile = async (url) => {\r\n        const response = await fetch(url);\r\n        const data = await response.blob();\r\n\r\n        return new File([data],\"userPhoto.jpg\",{type:'image/jpeg'})\r\n    } \r\n\r\n    useEffect(() => {     \r\n        if(!user){\r\n            navigate(\"/\");\r\n            return;\r\n        }\r\n        axios.get('https://api.chatengine.io/users/me',{\r\n            headers: {\r\n                \"project-id\": \"c12bd3f9-bb17-4cdf-8fcb-688f32c219c7\",\r\n                \"user-name\": user.email,\r\n                \"user-secret\": user.uid,\r\n            }\r\n        }).then(()=>{\r\n            setLoading(false);\r\n        }).catch(()=> {\r\n            let formdata = new FormData();\r\n            formdata.append('email', user.email)\r\n            formdata.append('username', user.email);\r\n            formdata.append('secret',user.uid);\r\n            axios.post('https://api.chatengine.io/users/',formdata,{headers: {\"private-key\":\"0e59f83b-5842-4313-a77e-f43c20c07a56\"}})\r\n           /* getFile(user.photoURL).then((avatar)=>{\r\n                formdata.append('avatar',avatar,avatar.name);\r\n                .then(()=> setLoading(false)).catch((error)=>console.log(error))\r\n\r\n            })*/\r\n\r\n        })\r\n    },[user, history]);\r\n    if(!user || loading) return 'Loading....'\r\n    return (\r\n\r\n        <div className='chats-page'>\r\n            <ChatEngine\r\n                height = \"calc(100vh -66px)\"\r\n                projectID = \"c12bd3f9-bb17-4cdf-8fcb-688f32c219c7\"\r\n                userName = {user.email}\r\n                userSecret={user.uid}\r\n            />\r\n\r\n        \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chats;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,OAAO,EAAEC,QAAQ,EAAEC,SAAS,QAAO,OAAO;AAC1D,SAASC,UAAU,EAAEC,WAAW,QAAQ,kBAAkB;AAC1D,SAASC,UAAU,QAAQ,mBAAmB;AAC9C,SAASC,IAAI,QAAQ,qBAAqB;AAC1C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO;AAAuB,SAAAC,GAAA,IAAAC,IAAA;AAEvC,IAAMC,KAAK,GAAG,SAARA,KAAKA,CAAA,EAAS;EAChB,IAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,IAAAS,QAAA,GAAiBL,OAAO,CAAC,CAAC;IAAlBM,IAAI,GAAAD,QAAA,CAAJC,IAAI;EACZ,IAAAC,SAAA,GAA6Bd,QAAQ,CAAC,IAAI,CAAC;IAAAe,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAArCG,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EACzBI,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;EAEjB,IAAMQ,OAAO;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,GAAG,EAAK;MAC3B,IAAMC,QAAQ,SAASC,KAAK,CAACF,GAAG,CAAC;MACjC,IAAMG,IAAI,SAASF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAElC,OAAO,IAAIC,IAAI,CAAC,CAACF,IAAI,CAAC,EAAC,eAAe,EAAC;QAACG,IAAI,EAAC;MAAY,CAAC,CAAC;IAC/D,CAAC;IAAA,gBALKT,OAAOA,CAAAU,EAAA;MAAA,OAAAT,IAAA,CAAAU,KAAA,OAAAC,SAAA;IAAA;EAAA,GAKZ;EAEDhC,SAAS,CAAC,YAAM;IACZ,IAAG,CAACY,IAAI,EAAC;MACLF,QAAQ,CAAC,GAAG,CAAC;MACb;IACJ;IACAL,KAAK,CAAC4B,GAAG,CAAC,oCAAoC,EAAC;MAC3CC,OAAO,EAAE;QACL,YAAY,EAAE,sCAAsC;QACpD,WAAW,EAAEtB,IAAI,CAACuB,KAAK;QACvB,aAAa,EAAEvB,IAAI,CAACwB;MACxB;IACJ,CAAC,CAAC,CAACC,IAAI,CAAC,YAAI;MACRpB,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC,CAACqB,KAAK,CAAC,YAAK;MACV,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC7BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE7B,IAAI,CAACuB,KAAK,CAAC;MACpCI,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE7B,IAAI,CAACuB,KAAK,CAAC;MACvCI,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAC7B,IAAI,CAACwB,GAAG,CAAC;MAClC/B,KAAK,CAACqC,IAAI,CAAC,kCAAkC,EAACH,QAAQ,EAAC;QAACL,OAAO,EAAE;UAAC,aAAa,EAAC;QAAsC;MAAC,CAAC,CAAC;IAO7H,CAAC,CAAC;EACN,CAAC,EAAC,CAACtB,IAAI,EAAE+B,OAAO,CAAC,CAAC;EAClB,IAAG,CAAC/B,IAAI,IAAII,OAAO,EAAE,OAAO,aAAa;EACzC,OAEIR,IAAA;IAAKoC,SAAS,EAAC,YAAY;IAAAC,QAAA,EACvBrC,IAAA,CAACL,UAAU;MACP2C,MAAM,EAAG,mBAAmB;MAC5BC,SAAS,EAAG,sCAAsC;MAClDC,QAAQ,EAAIpC,IAAI,CAACuB,KAAM;MACvBc,UAAU,EAAErC,IAAI,CAACwB;IAAI,CACxB;EAAC,CAGD,CAAC;AAEd,CAAC;AAED,eAAe3B,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}